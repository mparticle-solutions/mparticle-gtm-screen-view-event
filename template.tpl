___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "mParticle - Event - Screen View Template",
  "catagories": [
    "MARKETING", 
    "ANALYTICS", 
    "PERSONALIZATION"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "This mParticle GTM Template allows you to configure and track screen views via the mParticle web SDK. The mParticle SDK must be intialized before this tag will work.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "screenName",
    "displayName": "Screen Name",
    "simpleValueType": true,
    "help": "The Event Name field should be set to a generic page name. For example, an e-commerce website could have hundreds of product detail pages. To log these correctly, you should use a generic name for Event Name (e.g. \"Product Detail Page\") and then log the url and other attributes of the page as Attributes.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "url",
    "displayName": "Page URL",
    "simpleValueType": true,
    "help": "This URL will populate in the screen view event as a custom attribute.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "enableGA",
    "displayName": "Are you enabling GA for this page?",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": true,
        "displayValue": "Yes"
      },
      {
        "value": false,
        "displayValue": "No"
      }
    ],
    "simpleValueType": true,
    "help": "Please select if you are enabling Google Analytics in order to populate the screen view tag with the proper custom flags for tracking.",
    "defaultValue": false,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "singlePageApp",
    "displayName": "Is this a single page app?",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": true,
        "displayValue": "yes"
      },
      {
        "value": false,
        "displayValue": "no"
      }
    ],
    "simpleValueType": true,
    "defaultValue": false,
    "help": "If you are collecting data from a single page app and you are integration with Google Analytics, the screen view payload will require both \u0027Google.Page\u0027 and \u0027Google.Title\u0027 to be added to the Custom Flags. \u0027Google.Page\u0027 will be added automatically from the previously provided URL.",
    "enablingConditions": [
      {
        "paramName": "enableGA",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleTitle",
    "displayName": "Google.Title",
    "simpleValueType": true,
    "help": "This will populate into the custom flags as \u0027Google.Title\u0027 for proper tracking of the page via the mParticle GA integration.",
    "enablingConditions": [
      {
        "paramName": "singlePageApp",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "customAttributes",
    "displayName": "Custom Attributes",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Attribute Key",
        "name": "key",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Attribute Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "help": "Please add any desired custom attributes to be logged with this page view event."
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "customFlags",
    "displayName": "Custom Flags",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Custom Flag Key",
        "name": "key",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Custom Flag Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "help": "Please add any desired custom flags to be mapped into the mParticle page view event here."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const callInWindow = require('callInWindow');

// -- helper functions --
const populateAttributes = function(rows){
  let obj = {};
  if (rows) {
    rows.forEach((row)=> {
      obj[row.key] = row.value; 
    });
  }
  return obj;            
};

// -- Log mParticle Event --
let eventName = data.screenName; 

let customAttributes = populateAttributes(data.customAttributes); 
customAttributes.url = data.url; 
let flags = populateAttributes(data.customFlags);  

if (data.enableGA && data.singlePageApp){
  flags['Google.Page'] = data.url; 
  flags['Google.title'] = data.googleTitle; 
}

//callInWindow('mParticle.ready', function() { 
    log("mParticle values =", eventName, customAttributes, flags); 
    callInWindow('mParticle.logPageView', eventName, customAttributes, flags);
//}); 



// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.logPageView"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.ready"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: logPageView called with correct values
  code: "const log = require('logToConsole');\nconst mockData = {\n  screenName: \"\
    test event name\", \n  url: \"test.com\",\n  customFlags: [\n    {\n     \"key\"\
    : \"CF Key\", \n     \"value\": \"CF Value\", \n    }\n  ],\n  customAttributes:\
    \ [\n    {\n      \"key\": \"CA Key\", \n      \"value\": \"CA Value\",\n    }\n\
    \  ],\n};\n\n     \nconst transformedData = {\n  eventName: \"test event name\"\
    , \n  attributes: {\n    \"CA Key\": \"CA Value\", \n    \"url\": \"test.com\"\
    ,\n  }, \n  flags: {\n    \"CF Key\": \"CF Value\",\n  }\n};\n// Call runCode\
    \ to run the template's code.\nrunCode(mockData);\n\n// Verify that the tag finished\
    \ successfully.\nassertApi('callInWindow').wasCalledWith('mParticle.logPageView',\
    \ transformedData.eventName, transformedData.attributes, transformedData.flags);\n"
- name: Attributes and flags converted properly when provided
  code: "const log = require('logToConsole');\nconst mockData = {\n  screenName: \"\
    test event name\", \n  url: \"test.com\",\n  customFlags: [\n    {\n     \"key\"\
    : \"CF Key\", \n     \"value\": \"CF Value\", \n    }\n  ],\n  customAttributes:\
    \ [\n    {\n      \"key\": \"CA Key\", \n      \"value\": \"CA Value\",\n    }\n\
    \  ],\n};\n\n     \nconst transformedData = {\n  eventName: \"test event name\"\
    , \n  attributes: {\n    \"CA Key\": \"CA Value\", \n    \"url\": \"test.com\"\
    ,\n  }, \n  flags: {\n    \"CF Key\": \"CF Value\",\n  }\n};\n// Call runCode\
    \ to run the template's code.\nrunCode(mockData);\n\n// Verify that the tag finished\
    \ successfully.\nassertApi('callInWindow').wasCalledWith('mParticle.logPageView',\
    \ transformedData.eventName, transformedData.attributes, transformedData.flags);\n"


___NOTES___

Created on 8/7/2023, 4:24:37 PM


